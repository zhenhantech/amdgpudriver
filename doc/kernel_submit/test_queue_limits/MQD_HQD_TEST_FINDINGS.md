# MQD/HQDæµ‹è¯•ç»“æœåˆ†æ

**æµ‹è¯•æ—¥æœŸ**: 2026-01-30  
**æµ‹è¯•ç›®çš„**: é€šè¿‡è¯»å– `/sys/kernel/debug/kfd/mqds` å’Œ `hqds` æŸ¥çœ‹çœŸå®çš„ç¡¬ä»¶Queueä½¿ç”¨æƒ…å†µ

---

## ğŸ”¬ æµ‹è¯•ç»“æœ

### æµ‹è¯•1: 16 Streams

| æŒ‡æ ‡ | é¢„æœŸ | å®é™… | çŠ¶æ€ |
|-----|------|------|------|
| è½¯ä»¶é˜Ÿåˆ—ï¼ˆMQDï¼‰ | 16 | **20** | âš ï¸ ä¸åŒ¹é… |
| ç¡¬ä»¶é˜Ÿåˆ—ï¼ˆHQDï¼‰ | â‰¤16 | **20** | âš ï¸ ä¸åŒ¹é… |
| HQDæ˜ å°„ | 1:1 | **1:1** | âœ… æ­£ç¡® |

### æµ‹è¯•2: 32 Streams

| æŒ‡æ ‡ | é¢„æœŸ | å®é™… | çŠ¶æ€ |
|-----|------|------|------|
| è½¯ä»¶é˜Ÿåˆ—ï¼ˆMQDï¼‰ | 32 | **20** | âš ï¸ ä¸åŒ¹é… |
| ç¡¬ä»¶é˜Ÿåˆ—ï¼ˆHQDï¼‰ | â‰¤32 | **20** | âš ï¸ ä¸åŒ¹é… |
| HQDæ˜ å°„ | 1:1 | **1:1** | âœ… æ­£ç¡® |

### æµ‹è¯•3: 64 Streams

| æŒ‡æ ‡ | é¢„æœŸ | å®é™… | çŠ¶æ€ |
|-----|------|------|------|
| è½¯ä»¶é˜Ÿåˆ—ï¼ˆMQDï¼‰ | 64 | **20** | âš ï¸ ä¸åŒ¹é… |
| ç¡¬ä»¶é˜Ÿåˆ—ï¼ˆHQDï¼‰ | â‰¤32ï¼Œå¯èƒ½éœ€è¦å¤ç”¨ | **20** | âš ï¸ ä¸åŒ¹é… |
| HQDæ˜ å°„ | å¯èƒ½å¤šå¯¹ä¸€ | **1:1** | âš ï¸ æœªå‡ºç°å¤ç”¨ |

---

## ğŸ¤” å…³é”®å‘ç°

### 1. æ‰€æœ‰æµ‹è¯•éƒ½æ˜¾ç¤º20ä¸ªé˜Ÿåˆ—

**ç°è±¡**: æ— è®ºåˆ›å»º16, 32, è¿˜æ˜¯64ä¸ªstreamsï¼Œdebugfséƒ½æ˜¾ç¤º20ä¸ªæ´»è·ƒé˜Ÿåˆ—ã€‚

**å¯èƒ½åŸå› **:

#### A. HIPè¿è¡Œæ—¶çš„é˜Ÿåˆ—æ± æœºåˆ¶

```
å‡è®¾: HIPè¿è¡Œæ—¶å¯èƒ½ä½¿ç”¨é˜Ÿåˆ—æ± ï¼ˆQueue Poolï¼‰

HIPåˆ›å»ºStreamæ—¶:
  1. æ£€æŸ¥é˜Ÿåˆ—æ± æ˜¯å¦æœ‰å¯ç”¨é˜Ÿåˆ—
  2. å¦‚æœæœ‰ï¼Œå¤ç”¨ç°æœ‰é˜Ÿåˆ—
  3. å¦‚æœæ²¡æœ‰ï¼Œåˆ›å»ºæ–°é˜Ÿåˆ—ï¼ˆä½†å¯èƒ½æœ‰ä¸Šé™ï¼‰

é˜Ÿåˆ—æ± å¤§å°å¯èƒ½å›ºå®š = 20ï¼Ÿ
```

**è¯æ®**:
- æ‰€æœ‰ä¸‰ä¸ªæµ‹è¯•æ˜¾ç¤ºç›¸åŒçš„20ä¸ªring bufferåœ°å€
- ç¬¬ä¸€ä¸ªåœ°å€æ€»æ˜¯ `017ba000`ï¼ˆç›¸åŒçš„èµ·å§‹é˜Ÿåˆ—ï¼‰

#### B. æµ‹è¯•æ—¶é—´çª—å£é—®é¢˜

```
æµ‹è¯•æµç¨‹:
  1. åˆ›å»ºstreams
  2. ç­‰å¾…15ç§’
  3. è¯»å–MQD/HQD â† å¯èƒ½æ­¤æ—¶éƒ¨åˆ†é˜Ÿåˆ—å·²è¢«æ¸…ç†ï¼Ÿ
  4. ç¨‹åºç»§ç»­è¿è¡Œ
```

**å¯èƒ½æ€§**: 
- é˜Ÿåˆ—åˆ›å»ºæ˜¯æ‡’åŠ è½½ï¼ˆLazy Creationï¼‰
- åªæœ‰åœ¨å®é™…ä½¿ç”¨æ—¶æ‰åˆ›å»º
- æˆ‘ä»¬çš„æµ‹è¯•kernelså¤ªå¿«å®Œæˆï¼Œé˜Ÿåˆ—è¢«å¿«é€Ÿå›æ”¶ï¼Ÿ

#### C. ROCm/KFDçš„é˜Ÿåˆ—é™åˆ¶

```
å¯èƒ½å­˜åœ¨çš„é™åˆ¶:
  - KFD per-process queue limit: æŸä¸ªé…ç½®é™åˆ¶äº†20ä¸ªï¼Ÿ
  - GPU contextåˆ‡æ¢é™åˆ¶
  - å†…å­˜èµ„æºé™åˆ¶
```

#### D. debugfsè¯»å–æ—¶æœºé—®é¢˜

```
race condition:
  1. æµ‹è¯•ç¨‹åºåˆ›å»º32ä¸ªstreams
  2. è„šæœ¬sleep 3ç§’
  3. è¯»å–debugfs â† æ­¤æ—¶éƒ¨åˆ†é˜Ÿåˆ—å¯èƒ½è¿˜æœªæäº¤åˆ°GPUï¼Ÿ
  4. æˆ–è€…ï¼šæœ‰äº›é˜Ÿåˆ—å·²ç»è¢«å›æ”¶ï¼Ÿ
```

---

## ğŸ“Š æ•°æ®åˆ†æ

### MQDæ•°æ®ï¼ˆè½¯ä»¶é˜Ÿåˆ—ï¼‰

**ç»Ÿè®¡æ–¹æ³•**: 
```bash
# ç»Ÿè®¡å”¯ä¸€çš„ring bufferåœ°å€
grep "00000200:" active_mqds.txt | awk '{print $2}' | sort | uniq | wc -l
```

**ç»“æœ**: æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯20ä¸ªå”¯ä¸€åœ°å€

**20ä¸ªring bufferåœ°å€**:
```
017ba000, 017bd000, 017c0000, 017c3000,
017ae000, 017b1000, 017b4000, 017b7000,
017a2000, 017a5000, 017a8000, 017ab000,
01796000, 01799000, 0179c000, 0179f000,
006ed000, 006f0000, 006f3000, 006f6000
```

**è§‚å¯Ÿ**: 
- åœ°å€æ˜¯è¿ç»­åˆ†é…çš„ï¼ˆæ¯ä¸ªç›¸è·0x3000 = 12KBï¼‰
- å‰16ä¸ªåœ°å€åœ¨01796000-017c3000èŒƒå›´
- å4ä¸ªåœ°å€åœ¨006ed000-006f6000èŒƒå›´ï¼ˆå¯èƒ½æ˜¯ä¸åŒçš„å†…å­˜æ± ï¼Ÿï¼‰

### HQDæ•°æ®ï¼ˆç¡¬ä»¶é˜Ÿåˆ—ï¼‰

**ç»Ÿè®¡æ–¹æ³•**:
```bash
# ç»Ÿè®¡éé›¶ring bufferåœ°å€çš„HQD
awk '/CP Pipe/ {getline; if ($2 != "00000000") count++} END {print count}' active_hqds.txt
```

**ç»“æœ**: æ‰€æœ‰æµ‹è¯•éƒ½æ˜¯20ä¸ªæ´»è·ƒHQD

**HQDåˆ†å¸ƒ**:
```
æ‰€æœ‰20ä¸ªHQDéƒ½åœ¨åŒä¸€ä¸ªPipeä¸Š
Pipeç¼–å·: æ˜¾ç¤ºä¸º "Pipe Pipe"ï¼ˆè§£æé”™è¯¯ï¼‰
å®é™…å¯èƒ½: Pipe 0 æˆ–è€…å¤šä¸ªPipe
```

**æ³¨æ„**: æˆ‘ä»¬çš„è§£æè„šæœ¬å¯¹HQDçš„Pipe/Queueè§£æå¯èƒ½æœ‰é—®é¢˜ã€‚

---

## â“ éœ€è¦è¿›ä¸€æ­¥è°ƒæŸ¥çš„é—®é¢˜

### 1. ä¸ºä»€ä¹ˆå›ºå®šæ˜¯20ä¸ªé˜Ÿåˆ—ï¼Ÿ

**è°ƒæŸ¥æ–¹å‘**:
- [ ] æ£€æŸ¥HIPè¿è¡Œæ—¶æ˜¯å¦æœ‰é˜Ÿåˆ—æ± å¤§å°é™åˆ¶
- [ ] æ£€æŸ¥KFDçš„per-processé˜Ÿåˆ—é™åˆ¶é…ç½®
- [ ] æ£€æŸ¥ `/sys/module/amdkfd/parameters/` ä¸‹çš„é˜Ÿåˆ—ç›¸å…³å‚æ•°
- [ ] æŸ¥çœ‹HIP runtimeçš„é˜Ÿåˆ—åˆ†é…ç­–ç•¥ä»£ç 

**å¯èƒ½çš„é…ç½®**:
```bash
# æ£€æŸ¥KFDå‚æ•°
ls -l /sys/module/amdkfd/parameters/
cat /sys/module/amdkfd/parameters/max_num_of_queues_per_process
```

### 2. Stream vs Queueçš„æ˜ å°„å…³ç³»

**é—®é¢˜**: 
- æ¯ä¸ªStreamæ˜¯å¦çœŸçš„åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„Queueï¼Ÿ
- è¿˜æ˜¯å¤šä¸ªStreamå¯èƒ½å…±äº«Queueï¼Ÿ

**éªŒè¯æ–¹æ³•**:
- [ ] æ·»åŠ HIP API traceæ¥è·Ÿè¸ªqueue creation
- [ ] ä½¿ç”¨`HSA_TOOLS_LIB`å’Œ`HSA_ENABLE_INTERRUPT=0`æ¥æŸ¥çœ‹HSAå±‚çš„è¡Œä¸º
- [ ] ä¿®æ”¹æµ‹è¯•ç¨‹åºï¼Œåœ¨streamåˆ›å»ºåç«‹å³æ£€æŸ¥é˜Ÿåˆ—æ•°é‡

### 3. æµ‹è¯•æ—¶æœºä¼˜åŒ–

**æ”¹è¿›æµ‹è¯•**:
- [ ] åœ¨åˆ›å»ºæ¯ä¸ªstreamåç«‹å³è¯»å–debugfs
- [ ] åœ¨kernel launchä¹‹å‰å’Œä¹‹ååˆ†åˆ«è¯»å–
- [ ] å»¶é•¿ç­‰å¾…æ—¶é—´ï¼Œç¡®ä¿æ‰€æœ‰é˜Ÿåˆ—éƒ½å·²æäº¤

**ä¿®æ”¹æµ‹è¯•è„šæœ¬**:
```bash
# å®æ—¶ç›‘æ§é˜Ÿåˆ—å˜åŒ–
while true; do
    count=$(sudo cat /sys/kernel/debug/kfd/mqds | grep "00000200:" | awk '{print $2}' | grep -v "00000000" | sort | uniq | wc -l)
    echo "$(date): Active queues = $count"
    sleep 1
done
```

### 4. éªŒè¯HQDçš„Pipe/Queueåˆ†é…

**é—®é¢˜**: æˆ‘ä»¬çš„è§£ææ˜¾ç¤º "Pipe Pipe"ï¼Œå¯èƒ½è§£ææœ‰è¯¯

**æ­£ç¡®è§£æ**:
```bash
# éœ€è¦é‡æ–°æ£€æŸ¥HQDè¾“å‡ºæ ¼å¼
# æ‰¾åˆ°æ­£ç¡®çš„Pipe IDå’ŒQueue IDä½ç½®
cat active_hqds.txt | grep "CP Pipe" | head -10
```

---

## ğŸ’¡ ä¸´æ—¶ç»“è®º

### è¯å®çš„å‘ç°

âœ… **é€šè¿‡MQD/HQDå¯ä»¥æŸ¥çœ‹çœŸå®é˜Ÿåˆ—çŠ¶æ€** 
- `/sys/kernel/debug/kfd/mqds` ç¡®å®åŒ…å«æ‰€æœ‰è½¯ä»¶é˜Ÿåˆ—çš„MQD
- `/sys/kernel/debug/kfd/hqds` ç¡®å®æ˜¾ç¤ºç¡¬ä»¶é˜Ÿåˆ—çŠ¶æ€
- å¯ä»¥é€šè¿‡ring bufferåœ°å€æ¥ç»Ÿè®¡é˜Ÿåˆ—æ•°é‡

âœ… **æ¯ä¸ªé˜Ÿåˆ—æœ‰ç‹¬ç«‹çš„ring buffer**
- 20ä¸ªä¸åŒçš„ring bufferåœ°å€
- è¯æ˜ç¡®å®æœ‰20ä¸ªç‹¬ç«‹çš„è½¯ä»¶é˜Ÿåˆ—

âœ… **1:1æ˜ å°„åœ¨å½“å‰æµ‹è¯•ä¸­** 
- 20ä¸ªMQD â†’ 20ä¸ªHQD
- æ²¡æœ‰çœ‹åˆ°HQDå¤ç”¨ï¼ˆå¯èƒ½å› ä¸ºæ•°é‡æœªè¶…è¿‡é™åˆ¶ï¼‰

### å¾…ç¡®è®¤çš„å‘ç°

âš ï¸ **ä¸ºä»€ä¹ˆå›ºå®šæ˜¯20ä¸ªé˜Ÿåˆ—ï¼Ÿ**
- å¯èƒ½æ˜¯HIPè¿è¡Œæ—¶çš„é˜Ÿåˆ—æ± å¤§å°
- å¯èƒ½æ˜¯KFDçš„æŸä¸ªé™åˆ¶
- å¯èƒ½æ˜¯æµ‹è¯•æ—¶æœºé—®é¢˜

âš ï¸ **ä¸ºä»€ä¹ˆ16/32/64 streamséƒ½æ˜¯20ä¸ªé˜Ÿåˆ—ï¼Ÿ**
- éœ€è¦æ›´è¯¦ç»†çš„traceæ¥ç¡®è®¤streamåˆ›å»ºæµç¨‹
- éœ€è¦æ£€æŸ¥HIPæ˜¯å¦å¤ç”¨é˜Ÿåˆ—

âš ï¸ **HQDå¤ç”¨æµ‹è¯•æœªæˆåŠŸ**
- 64ä¸ªstreamsåº”è¯¥ä¼šè¶…è¿‡32ä¸ªHQDé™åˆ¶
- ä½†åªçœ‹åˆ°20ä¸ªæ´»è·ƒé˜Ÿåˆ—
- æ— æ³•éªŒè¯HQDå¤ç”¨æœºåˆ¶

---

## ğŸ¯ éªŒè¯æ–¹æ³•çš„ä»·å€¼

### æˆåŠŸä¹‹å¤„

**æ­£ç¡®çš„æ–¹æ³•**: 
```
ç†è®ºè®¡ç®—ï¼ˆä»£ç ä¸­ç¡¬ç¼–ç ï¼‰âŒ
     â†“
è¯»å–debugfsï¼ˆçœŸå®ç¡¬ä»¶çŠ¶æ€ï¼‰âœ…
```

**å­¦åˆ°çš„ç»éªŒ**:
1. `/sys/kernel/debug/kfd/mqds` æ˜¯æŸ¥çœ‹è½¯ä»¶é˜Ÿåˆ—çš„æ­£ç¡®å…¥å£
2. `/sys/kernel/debug/kfd/hqds` æ˜¯æŸ¥çœ‹ç¡¬ä»¶é˜Ÿåˆ—çš„æ­£ç¡®å…¥å£
3. é€šè¿‡ring bufferåœ°å€å¯ä»¥å‡†ç¡®ç»Ÿè®¡é˜Ÿåˆ—æ•°é‡
4. MQDå’ŒHQDæ•°æ®å¯ä»¥å¯¹æ¯”éªŒè¯

### éœ€è¦æ”¹è¿›ä¹‹å¤„

**æµ‹è¯•ç¨‹åº**:
- âœ… æˆåŠŸåˆ›å»ºstreams
- âš ï¸ ä½†å®é™…é˜Ÿåˆ—æ•°é‡ä¸é¢„æœŸä¸ç¬¦
- éœ€è¦æ”¹è¿›ï¼šæ›´ç²¾ç¡®çš„æ—¶é—´æ§åˆ¶å’Œç›‘æ§

**è§£æè„šæœ¬**:
- âœ… æˆåŠŸç»Ÿè®¡ring bufferåœ°å€
- âš ï¸ HQDçš„Pipe/Queueè§£ææœ‰è¯¯
- éœ€è¦æ”¹è¿›ï¼šæ›´å‡†ç¡®çš„å­—æ®µè§£æ

**æµ‹è¯•ç­–ç•¥**:
- âš ï¸ å•æ¬¡snapshotä¸è¶³ä»¥è§‚å¯ŸåŠ¨æ€è¡Œä¸º
- éœ€è¦æ”¹è¿›ï¼šè¿ç»­ç›‘æ§é˜Ÿåˆ—å˜åŒ–

---

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¯åš

1. **æ£€æŸ¥KFDå‚æ•°**
```bash
ls /sys/module/amdkfd/parameters/
cat /sys/module/amdkfd/parameters/max_num_of_queues_per_process
```

2. **æ”¹è¿›HQDè§£æ**
```bash
# æ‰‹åŠ¨æ£€æŸ¥HQDæ ¼å¼
cat logs_mqd_inspection/active_hqds_32_*.txt | grep -A2 "CP Pipe" | head -30
```

3. **å®æ—¶ç›‘æ§æµ‹è¯•**
```bash
# å¯åŠ¨æµ‹è¯•ç¨‹åºï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç»ˆç«¯æŒç»­ç›‘æ§
watch -n 0.5 'sudo cat /sys/kernel/debug/kfd/mqds | grep "00000200:" | awk "{print \$2}" | grep -v "00000000" | sort | uniq | wc -l'
```

### éœ€è¦ä»£ç ä¿®æ”¹

4. **æ·»åŠ HIP trace**
```cpp
// åœ¨test_multiple_streams.cppä¸­æ·»åŠ 
setenv("AMD_LOG_LEVEL", "3", 1);
setenv("HIP_VISIBLE_DEVICES", "0", 1);
```

5. **åˆ›å»ºpersistent streams**
```cpp
// ä¿®æ”¹æµ‹è¯•ï¼Œè®©streamsä¿æŒæ›´é•¿æ—¶é—´
// é¿å…å¿«é€Ÿåˆ›å»º-é”€æ¯å¯¼è‡´çš„æ—¶é—´çª—å£é—®é¢˜
```

### æ·±å…¥è°ƒæŸ¥

6. **æŸ¥çœ‹HIP runtimeæºç **
- ç¡®è®¤streamåˆ›å»ºæµç¨‹
- ç¡®è®¤queue poolæœºåˆ¶
- ç¡®è®¤queueå¤ç”¨ç­–ç•¥

7. **ç ”ç©¶KFD queue management**
- æŸ¥çœ‹`create_queue` IOCTLå®ç°
- ç¡®è®¤queueåˆ†é…ç­–ç•¥
- ç¡®è®¤per-processé™åˆ¶

---

## ğŸ“ å…³é”®å­¦ä¹ 

### éªŒè¯äº†çš„æ¦‚å¿µ

âœ… **MQDï¼ˆMemory Queue Descriptorï¼‰**
- å­˜å‚¨åœ¨ä¸»æœºå†…å­˜ä¸­
- æ¯ä¸ªè½¯ä»¶é˜Ÿåˆ—ä¸€ä¸ªMQD
- åŒ…å«ring bufferåœ°å€ã€doorbellé…ç½®ç­‰
- å¯ä»¥é€šè¿‡debugfsæŸ¥çœ‹

âœ… **HQDï¼ˆHardware Queue Descriptorï¼‰**
- GPUç¡¬ä»¶ä¸­çš„é˜Ÿåˆ—æ§½ä½
- æ•°é‡å—ç¡¬ä»¶é™åˆ¶ï¼ˆ4 Pipes Ã— 8 Queues = 32ï¼‰
- åœ¨CPSCHæ¨¡å¼ä¸‹åŠ¨æ€åˆ†é…
- å¯ä»¥é€šè¿‡debugfsæŸ¥çœ‹å®é™…ä½¿ç”¨æƒ…å†µ

âœ… **debugfsä½œä¸ºè§‚å¯Ÿçª—å£**
- `/sys/kernel/debug/kfd/mqds`: è½¯ä»¶è§†è§’
- `/sys/kernel/debug/kfd/hqds`: ç¡¬ä»¶è§†è§’
- å®æ—¶åæ˜ ç³»ç»ŸçŠ¶æ€
- æ˜¯è°ƒè¯•å’ŒéªŒè¯çš„é‡è¦å·¥å…·

### éœ€è¦æ·±å…¥çš„é—®é¢˜

ğŸ¤” **Queue Poolæœºåˆ¶**ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- HIPè¿è¡Œæ—¶æ˜¯å¦ç»´æŠ¤é˜Ÿåˆ—æ± ï¼Ÿ
- æ± çš„å¤§å°å¦‚ä½•ç¡®å®šï¼Ÿ
- å¤ç”¨ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ

ğŸ¤” **Stream vs Queueæ˜ å°„**
- æ˜¯1:1æ˜ å°„å—ï¼Ÿ
- ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå¤ç”¨ï¼Ÿ
- åˆ›å»ºæ—¶æœºæ˜¯å¦æ˜¯æ‡’åŠ è½½ï¼Ÿ

ğŸ¤” **HQDåˆ†é…ç­–ç•¥**ï¼ˆCPSCHæ¨¡å¼ï¼‰
- Firmwareå¦‚ä½•é€‰æ‹©HQDï¼Ÿ
- å¦‚ä½•å¤„ç†è¶…è¿‡32ä¸ªé˜Ÿåˆ—çš„æƒ…å†µï¼Ÿ
- é˜Ÿåˆ—æŠ¢å å’Œå¤ç”¨å¦‚ä½•å®ç°ï¼Ÿ

---

## ğŸ“Œ è®°å½•ç”¨äºåç»­

### æœ‰ç”¨çš„å‘½ä»¤

```bash
# æŸ¥çœ‹MQDï¼ˆè½¯ä»¶é˜Ÿåˆ—ï¼‰
sudo cat /sys/kernel/debug/kfd/mqds > mqds.txt

# æŸ¥çœ‹HQDï¼ˆç¡¬ä»¶é˜Ÿåˆ—ï¼‰
sudo cat /sys/kernel/debug/kfd/hqds > hqds.txt

# ç»Ÿè®¡è½¯ä»¶é˜Ÿåˆ—æ•°é‡
grep "00000200:" mqds.txt | awk '{print $2}' | grep -v "00000000" | sort | uniq | wc -l

# ç»Ÿè®¡ç¡¬ä»¶é˜Ÿåˆ—æ•°é‡
awk '/CP Pipe/ {getline; if ($2 != "00000000") count++} END {print count}' hqds.txt

# å®æ—¶ç›‘æ§
watch -n 1 'sudo cat /sys/kernel/debug/kfd/mqds | grep "00000200:" | awk "{print \$2}" | grep -v "00000000" | sort | uniq | wc -l'
```

### æµ‹è¯•è„šæœ¬ä½ç½®

```
æµ‹è¯•ç¨‹åº: test_queue_limits/test_multiple_streams.cpp
æµ‹è¯•è„šæœ¬: test_queue_limits/test_and_inspect_mqd.sh
åˆ†æè„šæœ¬: test_queue_limits/analyze_mqd_hqd.sh
æµ‹è¯•æ•°æ®: test_queue_limits/logs_mqd_inspection/
```

---

**æ€»ç»“**: è™½ç„¶æµ‹è¯•ç»“æœä¸é¢„æœŸä¸å®Œå…¨ä¸€è‡´ï¼ˆ20ä¸ªé˜Ÿåˆ— vs 16/32/64ä¸ªstreamsï¼‰ï¼Œä½†æˆ‘ä»¬æˆåŠŸéªŒè¯äº†é€šè¿‡debugfsæŸ¥çœ‹çœŸå®ç¡¬ä»¶é˜Ÿåˆ—çŠ¶æ€çš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥éœ€è¦æ·±å…¥è°ƒæŸ¥ä¸ºä»€ä¹ˆé˜Ÿåˆ—æ•°é‡å›ºå®šåœ¨20ä¸ªï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®è§¦å‘HQDå¤ç”¨æœºåˆ¶ã€‚
