# HIP ç›®å½•ç»“æ„è¯¦è§£

## æ¦‚è¿°

`hip/` ç›®å½•æ˜¯ **HIP API è§„èŒƒå±‚**ï¼ŒåŒ…å«å¤´æ–‡ä»¶å®šä¹‰ã€æ–‡æ¡£ã€å·¥å…·å’Œæ„å»ºè„šæœ¬ï¼Œä½†**ä¸åŒ…å«å®ç°ä»£ç **ã€‚

> **é‡è¦æç¤º**ï¼šå®é™…çš„ HIP Runtime å®ç°åœ¨ `clr/hipamd/` ç›®å½•ä¸­ï¼Œ`hip/` åªæ˜¯æ¥å£å®šä¹‰å±‚ã€‚

## ç›®å½•æ ‘æ€»è§ˆ

```
hip/
â”œâ”€â”€ include/            # HIP API å¤´æ–‡ä»¶ï¼ˆæœ€æ ¸å¿ƒï¼‰
â”œâ”€â”€ docs/               # å®Œæ•´çš„HIPæ–‡æ¡£
â”œâ”€â”€ cmake/              # CMake æ„å»ºæ”¯æŒ
â”œâ”€â”€ bin/                # ç¼–è¯‘å·¥å…·è„šæœ¬
â”œâ”€â”€ docker/             # Docker å®¹å™¨é…ç½®
â”œâ”€â”€ configure           # é…ç½®è„šæœ¬
â”œâ”€â”€ install.sh          # å®‰è£…è„šæœ¬
â”œâ”€â”€ hip-lang-config.cmake.in   # CMake é…ç½®æ¨¡æ¿
â”œâ”€â”€ VERSION             # ç‰ˆæœ¬å·
â”œâ”€â”€ LICENSE.md          # è®¸å¯è¯
â”œâ”€â”€ README.md           # é¡¹ç›®è¯´æ˜
â””â”€â”€ CONTRIBUTING.md     # è´¡çŒ®æŒ‡å—
```

---

## æ ¸å¿ƒç›®å½•è¯¦è§£

### 1. ğŸ“‹ `include/` - HIP API å¤´æ–‡ä»¶

**å®šä½**ï¼šHIP ç¼–ç¨‹æ¥å£çš„å®Œæ•´å®šä¹‰ï¼ˆæœ€é‡è¦çš„ç›®å½•ï¼‰

**ä¸»è¦èŒè´£**ï¼š
- å®šä¹‰æ‰€æœ‰ HIP API å‡½æ•°å£°æ˜
- å®šä¹‰æ•°æ®ç±»å‹ã€æšä¸¾ã€å®
- æä¾›å¹³å°æŠ½è±¡ï¼ˆAMD/NVIDIAï¼‰
- åº”ç”¨ç¼–è¯‘æ—¶å¿…é¡»å¼•ç”¨

**ç›®å½•ç»“æ„**ï¼š
```
include/hip/
â”œâ”€â”€ hip_runtime.h                # HIP Runtime ä¸»å¤´æ–‡ä»¶ï¼ˆåŒ…å«ä¸€åˆ‡ï¼‰
â”œâ”€â”€ hip_runtime_api.h            # HIP Runtime API å£°æ˜ï¼ˆCæ¥å£ï¼‰
â”‚
â”œâ”€â”€ æ•°æ®ç±»å‹å®šä¹‰ï¼š
â”‚   â”œâ”€â”€ hip_common.h             # é€šç”¨å®šä¹‰å’Œå®
â”‚   â”œâ”€â”€ driver_types.h           # é©±åŠ¨ç›¸å…³ç±»å‹
â”‚   â”œâ”€â”€ hip_vector_types.h       # å‘é‡ç±»å‹ï¼ˆfloat4, int3ç­‰ï¼‰
â”‚   â”œâ”€â”€ channel_descriptor.h     # é€šé“æè¿°ç¬¦
â”‚   â”œâ”€â”€ texture_types.h          # çº¹ç†ç±»å‹
â”‚   â”œâ”€â”€ surface_types.h          # è¡¨é¢ç±»å‹
â”‚   â””â”€â”€ library_types.h          # åº“ç±»å‹å®šä¹‰
â”‚
â”œâ”€â”€ æ•°å­¦å’Œæ•°å€¼ç±»å‹ï¼š
â”‚   â”œâ”€â”€ hip_fp16.h               # åŠç²¾åº¦æµ®ç‚¹ï¼ˆFP16ï¼‰
â”‚   â”œâ”€â”€ hip_bf16.h/hip_bfloat16.h # BFloat16
â”‚   â”œâ”€â”€ hip_fp8.h                # FP8ï¼ˆAIè®­ç»ƒï¼‰
â”‚   â”œâ”€â”€ hip_fp4.h/hip_fp6.h      # ä½ç²¾åº¦ç±»å‹
â”‚   â”œâ”€â”€ hip_complex.h            # å¤æ•°ç±»å‹
â”‚   â”œâ”€â”€ math_functions.h         # æ•°å­¦å‡½æ•°å£°æ˜
â”‚   â””â”€â”€ hip_math_constants.h     # æ•°å­¦å¸¸é‡
â”‚
â”œâ”€â”€ è®¾å¤‡ç«¯åŠŸèƒ½ï¼š
â”‚   â”œâ”€â”€ device_functions.h       # è®¾å¤‡å‡½æ•°ï¼ˆ__device__ï¼‰
â”‚   â”œâ”€â”€ hip_cooperative_groups.h # åä½œç»„ï¼ˆCooperative Groupsï¼‰
â”‚   â””â”€â”€ hip_texture_types.h      # çº¹ç†ç±»å‹
â”‚
â”œâ”€â”€ æ‰©å±•å’Œå·¥å…·ï¼š
â”‚   â”œâ”€â”€ hip_ext.h                # HIP æ‰©å±•
â”‚   â”œâ”€â”€ hip_ext_ocp.h            # OCP (Open Compute Project) æ‰©å±•
â”‚   â”œâ”€â”€ hip_gl_interop.h         # OpenGL äº’æ“ä½œ
â”‚   â”œâ”€â”€ hiprtc.h                 # HIP RTC (Runtime Compilation)
â”‚   â”œâ”€â”€ hip_profile.h            # æ€§èƒ½åˆ†ææ”¯æŒ
â”‚   â””â”€â”€ hip_deprecated.h         # åºŸå¼ƒçš„API
â”‚
â””â”€â”€ å…¼å®¹å±‚ï¼š
    â”œâ”€â”€ hip_hcc.h                # HCC å…¼å®¹ï¼ˆå·²åºŸå¼ƒï¼‰
    â””â”€â”€ linker_types.h           # é“¾æ¥å™¨ç±»å‹
```

**å…³é”®å¤´æ–‡ä»¶è¯´æ˜**ï¼š

#### `hip_runtime.h` - æ€»å¤´æ–‡ä»¶
```cpp
// è¿™æ˜¯åº”ç”¨ç¨‹åºé€šå¸¸åŒ…å«çš„å”¯ä¸€å¤´æ–‡ä»¶
#include <hip/hip_runtime.h>

// å®ƒä¼šæ ¹æ®å¹³å°è‡ªåŠ¨åŒ…å«ï¼š
#if defined(__HIP_PLATFORM_AMD__)
    #include <hip/amd_detail/amd_hip_runtime.h>  // AMD å®ç°
#elif defined(__HIP_PLATFORM_NVIDIA__)
    #include <hip/nvidia_detail/nvidia_hip_runtime.h>  // NVIDIA å®ç°
#endif

// å¹¶åŒ…å«æ‰€æœ‰å¿…è¦çš„å­å¤´æ–‡ä»¶
#include <hip/hip_runtime_api.h>
#include <hip/hip_vector_types.h>
// ... ç­‰ç­‰
```

#### `hip_runtime_api.h` - API å£°æ˜
```cpp
// æ‰€æœ‰ HIP Runtime API å‡½æ•°çš„å£°æ˜
// è¿™æ˜¯ä¸€ä¸ª C å¤´æ–‡ä»¶ï¼Œå¯ä»¥è¢« C å’Œ C++ ä½¿ç”¨

// å†…å­˜ç®¡ç†
hipError_t hipMalloc(void** ptr, size_t size);
hipError_t hipMemcpy(void* dst, const void* src, size_t size, hipMemcpyKind kind);
hipError_t hipFree(void* ptr);

// è®¾å¤‡ç®¡ç†
hipError_t hipGetDeviceCount(int* count);
hipError_t hipSetDevice(int deviceId);

// æµå’Œäº‹ä»¶
hipError_t hipStreamCreate(hipStream_t* stream);
hipError_t hipEventCreate(hipEvent_t* event);

// å†…æ ¸å¯åŠ¨
hipError_t hipLaunchKernel(const void* function_address, 
                           dim3 gridDim, dim3 blockDim,
                           void** args, size_t sharedMemBytes,
                           hipStream_t stream);
// ... è¿˜æœ‰ 200+ ä¸ª API å‡½æ•°
```

**ç‰¹ç‚¹**ï¼š
- âœ… **åªæœ‰å£°æ˜ï¼Œæ²¡æœ‰å®ç°**
- âœ… **ç¼–è¯‘æ—¶ä¾èµ–**ï¼šåº”ç”¨ç¼–è¯‘éœ€è¦
- âœ… **å¹³å°æ— å…³**ï¼šé€šè¿‡å®æ”¯æŒ AMD/NVIDIA
- âœ… **ç¨³å®šçš„ ABI**ï¼šAPI æ¥å£ä¿æŒå…¼å®¹

---

### 2. ğŸ“š `docs/` - å®Œæ•´çš„ HIP æ–‡æ¡£

**å®šä½**ï¼šHIP çš„å®˜æ–¹æ–‡æ¡£æºç ï¼ˆä½¿ç”¨ Sphinx æ„å»ºï¼‰

**ä¸»è¦èŒè´£**ï¼š
- API å‚è€ƒæ‰‹å†Œ
- ç¼–ç¨‹æŒ‡å—å’Œæ•™ç¨‹
- æ€§èƒ½ä¼˜åŒ–å»ºè®®
- ç§»æ¤æŒ‡å—ï¼ˆCUDA â†’ HIPï¼‰

**ç›®å½•ç»“æ„**ï¼š
```
docs/
â”œâ”€â”€ index.md                     # æ–‡æ¡£é¦–é¡µ
â”œâ”€â”€ conf.py                      # Sphinx é…ç½®
â”œâ”€â”€ environment.yml              # Conda ç¯å¢ƒ
â”‚
â”œâ”€â”€ what_is_hip.rst              # HIP æ˜¯ä»€ä¹ˆ
â”‚
â”œâ”€â”€ install/                     # å®‰è£…æŒ‡å—
â”‚   â”œâ”€â”€ install.rst              # å®‰è£…è¯´æ˜
â”‚   â””â”€â”€ build.rst                # ä»æºç æ„å»º
â”‚
â”œâ”€â”€ how-to/                      # ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ hip_runtime_api.rst      # Runtime API ä½¿ç”¨
â”‚   â”œâ”€â”€ hip_runtime_api/         # API è¯¦ç»†è¯´æ˜
â”‚   â”‚   â”œâ”€â”€ initialization.rst   # åˆå§‹åŒ–
â”‚   â”‚   â”œâ”€â”€ memory_management.rst # å†…å­˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ asynchronous.rst     # å¼‚æ­¥æ‰§è¡Œ
â”‚   â”‚   â”œâ”€â”€ hipgraph.rst         # è®¡ç®—å›¾
â”‚   â”‚   â”œâ”€â”€ cooperative_groups.rst # åä½œç»„
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ hip_porting_guide.rst    # CUDA ç§»æ¤æŒ‡å—
â”‚   â”œâ”€â”€ hip_porting_driver_api.rst # Driver API ç§»æ¤
â”‚   â”œâ”€â”€ hip_rtc.rst              # Runtime Compilation
â”‚   â”œâ”€â”€ debugging.rst            # è°ƒè¯•æŠ€å·§
â”‚   â”œâ”€â”€ logging.rst              # æ—¥å¿—
â”‚   â”œâ”€â”€ performance_guidelines.rst # æ€§èƒ½ä¼˜åŒ–
â”‚   â””â”€â”€ kernel_language_cpp_support.rst # C++ æ”¯æŒ
â”‚
â”œâ”€â”€ tutorial/                    # æ•™ç¨‹
â”‚   â”œâ”€â”€ saxpy.rst                # SAXPY ç¤ºä¾‹
â”‚   â”œâ”€â”€ reduction.rst            # è§„çº¦æ“ä½œæ•™ç¨‹
â”‚   â””â”€â”€ cooperative_groups_tutorial.rst
â”‚
â”œâ”€â”€ understand/                  # ç†è§£ HIP
â”‚   â”œâ”€â”€ programming_model.rst   # ç¼–ç¨‹æ¨¡å‹
â”‚   â”œâ”€â”€ hardware_implementation.rst # ç¡¬ä»¶å®ç°
â”‚   â”œâ”€â”€ amd_clr.rst             # AMD CLR è§£é‡Š
â”‚   â”œâ”€â”€ compilers.rst           # ç¼–è¯‘å™¨
â”‚   â””â”€â”€ glossary.md             # æœ¯è¯­è¡¨
â”‚
â”œâ”€â”€ reference/                   # API å‚è€ƒ
â”‚   â”œâ”€â”€ hip_runtime_api_reference.rst # API å®Œæ•´å‚è€ƒ
â”‚   â”œâ”€â”€ hip_runtime_api/
â”‚   â”‚   â””â”€â”€ modules/            # æŒ‰æ¨¡å—åˆ†ç±»ï¼ˆ28ä¸ªæ¨¡å—ï¼‰
â”‚   â”‚       â”œâ”€â”€ memory.rst      # å†…å­˜ç®¡ç† API
â”‚   â”‚       â”œâ”€â”€ stream.rst      # æµ API
â”‚   â”‚       â”œâ”€â”€ event.rst       # äº‹ä»¶ API
â”‚   â”‚       â”œâ”€â”€ device.rst      # è®¾å¤‡ API
â”‚   â”‚       â””â”€â”€ ...
â”‚   â”œâ”€â”€ math_api.rst            # æ•°å­¦å‡½æ•°å‚è€ƒ
â”‚   â”œâ”€â”€ complex_math_api.rst    # å¤æ•°æ•°å­¦
â”‚   â”œâ”€â”€ error_codes.rst         # é”™è¯¯ç 
â”‚   â”œâ”€â”€ env_variables.rst       # ç¯å¢ƒå˜é‡
â”‚   â”œâ”€â”€ hardware_features.rst   # ç¡¬ä»¶ç‰¹æ€§
â”‚   â””â”€â”€ deprecated_api_list.rst # åºŸå¼ƒ API
â”‚
â”œâ”€â”€ data/                        # å›¾è¡¨å’Œå›¾åƒ
â”‚   â”œâ”€â”€ what_is_hip/
â”‚   â”‚   â””â”€â”€ hip.svg             # HIP æ¶æ„å›¾
â”‚   â”œâ”€â”€ how-to/
â”‚   â”‚   â””â”€â”€ hip_runtime_api/
â”‚   â”‚       â”œâ”€â”€ memory_management/ # å†…å­˜ç®¡ç†å›¾ç¤º
â”‚   â”‚       â”œâ”€â”€ asynchronous/      # å¼‚æ­¥æ‰§è¡Œå›¾
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ understand/
â”‚       â”œâ”€â”€ programming_model/     # ç¼–ç¨‹æ¨¡å‹å›¾ç¤º
â”‚       â””â”€â”€ hardware_implementation/ # ç¡¬ä»¶å›¾ç¤º
â”‚
â”œâ”€â”€ doxygen/                     # Doxygen é…ç½®
â”‚   â””â”€â”€ Doxyfile                 # API æ–‡æ¡£ç”Ÿæˆé…ç½®
â”‚
â”œâ”€â”€ sphinx/                      # Sphinx é…ç½®
â”‚   â”œâ”€â”€ _toc.yml.in             # ç›®å½•ç»“æ„
â”‚   â””â”€â”€ requirements.txt        # Python ä¾èµ–
â”‚
â”œâ”€â”€ tools/                       # æ–‡æ¡£å·¥å…·
â”‚   â”œâ”€â”€ example_codes/          # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ update_example_codes.py # æ›´æ–°å·¥å…·
â”‚
â”œâ”€â”€ faq.rst                      # å¸¸è§é—®é¢˜
â”œâ”€â”€ hip-7-changes.rst            # HIP 7.0 å˜æ›´
â””â”€â”€ license.md                   # è®¸å¯è¯
```

**æ–‡æ¡£å†…å®¹åˆ†ç±»**ï¼š

| æ–‡æ¡£ç±»å‹ | ä¸»è¦å†…å®¹ | ç›®æ ‡è¯»è€… |
|---------|---------|---------|
| **install/** | å®‰è£…å’Œæ„å»º | æ‰€æœ‰ç”¨æˆ· |
| **how-to/** | å®ç”¨æŒ‡å— | åº”ç”¨å¼€å‘è€… |
| **tutorial/** | åˆ†æ­¥æ•™ç¨‹ | åˆå­¦è€… |
| **understand/** | æ¦‚å¿µè§£é‡Š | æ·±åº¦ç”¨æˆ· |
| **reference/** | API å‚è€ƒ | æ‰€æœ‰å¼€å‘è€… |

**æ„å»ºæ–‡æ¡£**ï¼š
```bash
cd hip/docs
pip install -r sphinx/requirements.txt
make html
# ç”Ÿæˆçš„æ–‡æ¡£åœ¨ _build/html/index.html
```

**åœ¨çº¿æ–‡æ¡£**ï¼šhttps://rocm.docs.amd.com/projects/HIP/

---

### 3. ğŸ”§ `cmake/` - CMake æ„å»ºæ”¯æŒ

**å®šä½**ï¼šä¸ºä½¿ç”¨ HIP çš„é¡¹ç›®æä¾› CMake é›†æˆ

**ä¸»è¦èŒè´£**ï¼š
- æä¾› `find_package(HIP)` æ”¯æŒ
- å®šä¹‰ HIP ç¼–è¯‘è§„åˆ™
- å¤„ç†å¹³å°å·®å¼‚ï¼ˆAMD/NVIDIAï¼‰

**ç›®å½•ç»“æ„**ï¼š
```
cmake/
â”œâ”€â”€ FindHIP.cmake                # CMake æŸ¥æ‰¾è„šæœ¬ï¼ˆä¸»è¦æ–‡ä»¶ï¼‰
â””â”€â”€ FindHIP/
    â”œâ”€â”€ run_hipcc.cmake          # è¿è¡Œ hipcc ç¼–è¯‘å™¨
    â””â”€â”€ run_make2cmake.cmake     # Makefile è½¬ CMake
```

**`FindHIP.cmake` çš„ä½œç”¨**ï¼š

```cmake
# åº”ç”¨çš„ CMakeLists.txt ä¸­ä½¿ç”¨
find_package(HIP REQUIRED)

# è¿™ä¸ªè„šæœ¬ä¼šï¼š
# 1. æŸ¥æ‰¾ HIP å®‰è£…è·¯å¾„
# 2. æ£€æµ‹ HIP å¹³å°ï¼ˆAMD æˆ– NVIDIAï¼‰
# 3. è®¾ç½®ç¼–è¯‘å™¨è·¯å¾„å’Œæ ‡å¿—
# 4. å®šä¹‰å˜é‡ï¼š
#    - HIP_INCLUDE_DIRS    : HIP å¤´æ–‡ä»¶è·¯å¾„
#    - HIP_LIBRARIES       : HIP åº“æ–‡ä»¶
#    - HIP_PLATFORM        : amd æˆ– nvidia
#    - HIP_COMPILER        : hipcc è·¯å¾„
#    - HIP_VERSION         : HIP ç‰ˆæœ¬

# ç¼–è¯‘ HIP æºæ–‡ä»¶
hip_add_executable(myapp main.cpp kernel.hip)
target_link_libraries(myapp ${HIP_LIBRARIES})
```

**å…¸å‹ç”¨æ³•ç¤ºä¾‹**ï¼š
```cmake
cmake_minimum_required(VERSION 3.10)
project(MyHIPApp)

# æŸ¥æ‰¾ HIP
find_package(HIP REQUIRED)

# è®¾ç½®åŒ…å«è·¯å¾„
include_directories(${HIP_INCLUDE_DIRS})

# æ·»åŠ å¯æ‰§è¡Œæ–‡ä»¶
add_executable(myapp main.cpp)

# é“¾æ¥ HIP åº“
target_link_libraries(myapp ${HIP_LIBRARIES})
```

---

### 4. ğŸ”¨ `bin/` - ç¼–è¯‘å·¥å…·

**å®šä½**ï¼šHIP ç¼–è¯‘ç›¸å…³çš„è¾…åŠ©å·¥å…·

**ç›®å½•ç»“æ„**ï¼š
```
bin/
â”œâ”€â”€ hipcc_cmake_linker_helper   # CMake é“¾æ¥è¾…åŠ©è„šæœ¬
â””â”€â”€ hipdemangleatp              # ç¬¦å·åæ··æ·†å·¥å…·
```

**å·¥å…·è¯´æ˜**ï¼š

#### `hipcc_cmake_linker_helper`
- CMake æ„å»ºæ—¶çš„é“¾æ¥è¾…åŠ©å·¥å…·
- å¤„ç†ç‰¹æ®Šçš„é“¾æ¥éœ€æ±‚

#### `hipdemangleatp`
- ç¬¦å·åç§°åæ··æ·†ï¼ˆdemangleï¼‰
- ç”¨äºè°ƒè¯•å’Œåˆ†æ

**æ³¨æ„**ï¼šä¸»è¦çš„ `hipcc` ç¼–è¯‘å™¨åŒ…è£…å™¨åœ¨ `clr/hipamd/bin/` ä¸­ã€‚

---

### 5. ğŸ³ `docker/` - Docker å®¹å™¨é…ç½®

**å®šä½**ï¼šç”¨äºæ„å»ºå’Œæµ‹è¯•çš„ Docker å®¹å™¨å®šä¹‰

**ç›®å½•ç»“æ„**ï¼š
```
docker/
â”œâ”€â”€ dockerfile-build-ubuntu-16.04    # Ubuntu 16.04 æ„å»ºç¯å¢ƒ
â””â”€â”€ dockerfile-hip-ubuntu-16.04      # Ubuntu 16.04 HIP ç¯å¢ƒ
```

**ç”¨é€”**ï¼š
- CI/CD æŒç»­é›†æˆæµ‹è¯•
- æä¾›ä¸€è‡´çš„æ„å»ºç¯å¢ƒ
- ç”¨æˆ·å¿«é€Ÿæ­å»º HIP å¼€å‘ç¯å¢ƒ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š
```bash
# æ„å»º Docker é•œåƒ
docker build -f dockerfile-hip-ubuntu-16.04 -t hip-dev .

# è¿è¡Œå®¹å™¨
docker run -it --device=/dev/kfd --device=/dev/dri hip-dev
```

---

## é…ç½®å’Œå…ƒæ•°æ®æ–‡ä»¶

### é¡¶å±‚æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ä½œç”¨ |
|-----|------|
| `VERSION` | HIP ç‰ˆæœ¬å· |
| `README.md` | é¡¹ç›®è¯´æ˜ |
| `README-doc.md` | æ–‡æ¡£è¯´æ˜ |
| `LICENSE.md` | MIT è®¸å¯è¯ |
| `CONTRIBUTING.md` | è´¡çŒ®æŒ‡å— |
| `CODEOWNERS` | ä»£ç æ‰€æœ‰è€… |
| `Jenkinsfile` | CI/CD é…ç½® |
| `configure` | é…ç½®è„šæœ¬ |
| `install.sh` | å®‰è£…è„šæœ¬ |
| `hip-lang-config.cmake.in` | CMake é…ç½®æ¨¡æ¿ |

---

## HIP ç›®å½•çš„è§’è‰²å®šä½

### ğŸ“‹ æ¥å£å®šä¹‰å±‚ vs å®ç°å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  hip/ (æ¥å£è§„èŒƒ)                         â”‚
â”‚                                                          â”‚
â”‚  â€¢ include/    â†’ API å¤´æ–‡ä»¶å£°æ˜                          â”‚
â”‚  â€¢ docs/       â†’ ä½¿ç”¨æ–‡æ¡£                                â”‚
â”‚  â€¢ cmake/      â†’ æ„å»ºæ”¯æŒ                                â”‚
â”‚  â€¢ bin/        â†’ è¾…åŠ©å·¥å…·                                â”‚
â”‚                                                          â”‚
â”‚  ç‰¹ç‚¹ï¼šåªæœ‰æ¥å£ï¼Œæ²¡æœ‰å®ç°                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ åº”ç”¨ #include <hip/hip_runtime.h>
                         â”‚ ç¼–è¯‘æ—¶ä¾èµ–
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             clr/hipamd/ (å®ç°å±‚)                        â”‚
â”‚                                                          â”‚
â”‚  â€¢ src/        â†’ API å®ç°ä»£ç                             â”‚
â”‚  â€¢ CMakeLists.txt â†’ ç¼–è¯‘æˆ libamdhip64.so               â”‚
â”‚                                                          â”‚
â”‚  ç‰¹ç‚¹ï¼šå®Œæ•´çš„å®ç°ä»£ç                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ è¿è¡Œæ—¶åŠ è½½
                         â–¼
                    GPU æ‰§è¡Œ
```

### ç¼–è¯‘å’Œè¿è¡Œæµç¨‹

```
ç¼–è¯‘æ—¶ï¼š
  åº”ç”¨æºç 
      â†“ #include <hip/hip_runtime.h>
  ä½¿ç”¨ hip/include/ çš„å¤´æ–‡ä»¶
      â†“ hipcc ç¼–è¯‘ï¼ˆæˆ– clang++ï¼‰
  ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

è¿è¡Œæ—¶ï¼š
  å¯æ‰§è¡Œæ–‡ä»¶
      â†“ åŠ¨æ€é“¾æ¥
  åŠ è½½ libamdhip64.so (æ¥è‡ª clr/hipamd/)
      â†“ è°ƒç”¨å®ç°
  æ‰§è¡Œ HIP API
```

---

## æ–‡ä»¶æ•°é‡å’Œå¤§å°ç»Ÿè®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ç›®å½•         â”‚  æ–‡ä»¶æ•°   â”‚   ä¸»è¦ç±»å‹  â”‚    ç”¨é€”     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ include/       â”‚   ~30    â”‚  .h        â”‚  API å®šä¹‰   â”‚
â”‚ docs/          â”‚  ~150    â”‚  .rst/.md  â”‚  æ–‡æ¡£       â”‚
â”‚ cmake/         â”‚    3     â”‚  .cmake    â”‚  æ„å»ºæ”¯æŒ   â”‚
â”‚ bin/           â”‚    2     â”‚  è„šæœ¬      â”‚  å·¥å…·       â”‚
â”‚ docker/        â”‚    2     â”‚  Dockerfileâ”‚  å®¹å™¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

æ€»æ–‡ä»¶æ•°ï¼š~200
ä»£ç è¡Œæ•°ï¼š~5Kï¼ˆä¸»è¦æ˜¯å¤´æ–‡ä»¶ï¼‰
æ–‡æ¡£è¡Œæ•°ï¼š~50Kï¼ˆåŒ…æ‹¬ç”Ÿæˆçš„æ–‡æ¡£ï¼‰
```

---

## ä¸å…¶ä»–ç›®å½•çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROCm è½¯ä»¶æ ˆ                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åº”ç”¨ä»£ç 
    â†“ #include
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  hip/     â”‚  â† æ¥å£å®šä¹‰ï¼ˆå¤´æ–‡ä»¶ï¼‰
â”‚  include/ â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â”‚ ç¼–è¯‘æ—¶
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  clr/hipamd/  â”‚  â† HIP å®ç°
â”‚  src/         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  clr/rocclr/  â”‚  â† è®¾å¤‡æŠ½è±¡å±‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  rocr-runtime/   â”‚  â† HSA Runtime
â”‚  runtime/        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  rocr-runtime/   â”‚  â† Thunk åº“
â”‚  libhsakmt/      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ioctl
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  kfd/            â”‚  â† KFD é©±åŠ¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å¸¸è§ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: åº”ç”¨å¼€å‘è€…

```cpp
// myapp.cpp
#include <hip/hip_runtime.h>  // ä½¿ç”¨ hip/include/

int main() {
    // åªéœ€è¦ hip/ çš„å¤´æ–‡ä»¶
    // è¿è¡Œæ—¶è‡ªåŠ¨é“¾æ¥ clr/hipamd/ çš„åº“
    void* ptr;
    hipMalloc(&ptr, 1024);
    hipFree(ptr);
    return 0;
}
```

**éœ€è¦**ï¼š
- âœ… `hip/include/` - å¤´æ–‡ä»¶
- âœ… `libamdhip64.so` - è¿è¡Œæ—¶åº“ï¼ˆæ¥è‡ª clr/ï¼‰

**ä¸éœ€è¦**ï¼š
- âŒ `hip/docs/` - é™¤éè¦çœ‹æ–‡æ¡£
- âŒ `hip/cmake/` - å¦‚æœä¸ç”¨ CMake
- âŒ `clr/` çš„æºä»£ç 

### åœºæ™¯ 2: æ–‡æ¡£è´¡çŒ®è€…

**ä¿®æ”¹**ï¼š
- âœ… `hip/docs/` - æ–‡æ¡£æºæ–‡ä»¶

**æ„å»º**ï¼š
```bash
cd hip/docs
make html
```

### åœºæ™¯ 3: API è®¾è®¡è€…

**ä¿®æ”¹**ï¼š
- âœ… `hip/include/` - æ·»åŠ æ–° API å£°æ˜
- âœ… `hip/docs/` - æ›´æ–°æ–‡æ¡£
- âœ… `clr/hipamd/src/` - å®ç°æ–° API

---

## å­¦ä¹ è·¯å¾„å»ºè®®

```
å…¥é—¨çº§ï¼ˆåº”ç”¨å¼€å‘ï¼‰:
1. ğŸ“– hip/docs/what_is_hip.rst           â† äº†è§£ HIP æ˜¯ä»€ä¹ˆ
2. ğŸ“‹ hip/docs/install/                  â† å®‰è£… HIP
3. ğŸ“š hip/docs/tutorial/saxpy.rst        â† ç¬¬ä¸€ä¸ªç¨‹åº
4. ğŸ“– hip/include/hip/hip_runtime_api.h  â† æµè§ˆ API

è¿›é˜¶çº§ï¼ˆæ·±å…¥ç†è§£ï¼‰:
1. ğŸ“š hip/docs/how-to/                   â† å„ç§ä½¿ç”¨æŒ‡å—
2. ğŸ“– hip/docs/understand/               â† ç†è§£ç¼–ç¨‹æ¨¡å‹
3. ğŸ“‹ hip/docs/reference/                â† API å®Œæ•´å‚è€ƒ
4. ğŸ” clr/hipamd/src/                    â† æŸ¥çœ‹å®ç°

ä¸“å®¶çº§ï¼ˆè´¡çŒ®ä»£ç ï¼‰:
1. ğŸ“ hip/CONTRIBUTING.md                â† è´¡çŒ®æŒ‡å—
2. ğŸ”§ hip/include/                       â† è®¾è®¡æ–° API
3. ğŸ’» clr/hipamd/                        â† å®ç°ä»£ç 
4. ğŸ“š hip/docs/                          â† æ›´æ–°æ–‡æ¡£
```

---

## æ€»ç»“å›¾ç¤º

### hip/ ç›®å½•çš„æœ¬è´¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  hip/ æ˜¯ HIP çš„"è¯´æ˜ä¹¦"å’Œ"åˆçº¦"                      â”‚
â”‚                                                       â”‚
â”‚  ğŸ“‹ include/   â†’ API å®šä¹‰ï¼ˆåˆçº¦ï¼‰                     â”‚
â”‚  ğŸ“š docs/      â†’ ä½¿ç”¨æ‰‹å†Œï¼ˆè¯´æ˜ä¹¦ï¼‰                   â”‚
â”‚  ğŸ”§ cmake/     â†’ é›†æˆå·¥å…·ï¼ˆé…æ–¹ï¼‰                     â”‚
â”‚  ğŸ”¨ bin/       â†’ è¾…åŠ©å·¥å…·ï¼ˆå·¥å…·ç®±ï¼‰                   â”‚
â”‚                                                       â”‚
â”‚  ä¸åŒ…å«å®ç°ä»£ç ï¼                                     â”‚
â”‚  å®ç°åœ¨ clr/hipamd/ ä¸­                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å¿«é€Ÿè®°å¿†

```
hip/ çš„ä¸‰å¤§æ ¸å¿ƒï¼š

1. ğŸ“‹ include/     æœ€é‡è¦ï¼æ‰€æœ‰ API çš„å£°æ˜
2. ğŸ“š docs/        æœ€è¯¦ç»†ï¼å®Œæ•´çš„ä½¿ç”¨æ–‡æ¡£
3. ğŸ”§ cmake/       æœ€å®ç”¨ï¼æ„å»ºç³»ç»Ÿé›†æˆ

å…¶ä»–éƒ½æ˜¯è¾…åŠ©ï¼š
- bin/     â†’ å·¥å…·è„šæœ¬
- docker/  â†’ å®¹å™¨é…ç½®
- *.md     â†’ é¡¹ç›®è¯´æ˜
```

### ä¸ clr/ çš„å¯¹æ¯”

| å¯¹æ¯”é¡¹ | hip/ | clr/hipamd/ |
|--------|------|-------------|
| **è§’è‰²** | æ¥å£å®šä¹‰ | å®ç°ä»£ç  |
| **å†…å®¹** | å¤´æ–‡ä»¶+æ–‡æ¡£ | æºç +åº“ |
| **ä¾èµ–** | ç¼–è¯‘æ—¶ | è¿è¡Œæ—¶ |
| **ä¿®æ”¹** | API è®¾è®¡è€… | Runtime å·¥ç¨‹å¸ˆ |
| **ç”¨æˆ·** | æ‰€æœ‰å¼€å‘è€… | ï¼ˆé€æ˜ï¼‰ |

è¿™å°±æ˜¯ `hip/` ç›®å½•çš„å®Œæ•´ç»“æ„å’Œä½œç”¨ï¼å®ƒæ˜¯ HIP ç”Ÿæ€ç³»ç»Ÿçš„**æ¥å£å±‚**å’Œ**æ–‡æ¡£ä¸­å¿ƒ**ã€‚

